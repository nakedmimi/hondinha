<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalhes - Hondinha's</title>
    <link rel="stylesheet" href="PG4style.css" />
  </head>
  <body>
    <a href="index.html"
      ><img src="img/Frame 2.png" class="img-fundo" alt=""
    /></a>
    <header>
      <img src="img/Frame 7.png" alt="Logo Hondinha's" />
    </header>
    <div class="wrapper">
      <div class="menu-title">
        <img src="img/hondinha´s menu (1).png" alt="Menu" />
      </div>

      <!-- Item Details Container -->
      <div id="item-details" class="item-details">
        <div class="loader">Carregando...</div>
      </div>
    </div>

    <a href="PG2index.html" class="fab"> ❰ </a>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
      import {
        getFirestore,
        doc,
        getDoc,
      } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyAo5blTSo_bD_CpZSpGWWXI4hltuA6VXBw",
        authDomain: "honda-civic-2014.firebaseapp.com",
        projectId: "honda-civic-2014",
        storageBucket: "honda-civic-2014.firebasestorage.app",
        messagingSenderId: "1016933546976",
        appId: "1:1016933546976:web:c74f606a4e3a6e0c718985",
        measurementId: "G-2GSV3JNHDM",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Get item ID from URL
      const urlParams = new URLSearchParams(window.location.search);
      const itemId = urlParams.get("id");

      // Function to load and display item details
      async function loadItemDetails() {
        try {
          if (!itemId) {
            throw new Error("ID do item não fornecido");
          }

          const docRef = doc(db, "ho", itemId);
          const docSnap = await getDoc(docRef);

          const detailsContainer = document.getElementById("item-details");

          if (docSnap.exists()) {
            const item = docSnap.data();
            detailsContainer.innerHTML = `
              <div class="item-card">
                <h2>${item.name || "Sem nome"}</h2>
                ${
                  item.description
                    ? `<p class="description">${item.description}</p>`
                    : ""
                }
                <div class="item-meta">
                  ${
                    item.createdAt
                      ? `<span class="date"> ${new Date(
                          item.createdAt.seconds * 1000
                        ).toLocaleDateString()}</span>`
                      : ""
                  }
                  ${
                    item.rating
                      ? `<div class="rating">${"★".repeat(
                          item.rating
                        )}${"☆".repeat(5 - item.rating)}</div>`
                      : ""
                  }
                </div>
              </div>
            `;
          } else {
            detailsContainer.innerHTML =
              '<p class="error">Item não encontrado</p>';
          }
        } catch (error) {
          console.error("Erro ao carregar detalhes:", error);
          const detailsContainer = document.getElementById("item-details");
          detailsContainer.innerHTML = `<p class="error">Erro ao carregar detalhes: ${error.message}</p>`;
        }
      }

      // Load item details when the page loads
      document.addEventListener("DOMContentLoaded", loadItemDetails);
    </script>
  </body>
</html>
